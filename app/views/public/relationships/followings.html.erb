<div class="container mt-5">
<h3>フォローリスト</h3>

<% if @users.exists? %>
 <table class="table mt-3">
  <tr>
    <th class="col-1"></th>
    <th class="col-2">ユーザー名</th>
    <th class="col-1">投稿数</th>
    <th class="col-2">フォロー数</th>
    <th class="col-2">フォロワー数</th>
    <th class="col-2"></th>
    <th class="col-2"></th>
  </tr>


<% @users.each do |user| %>
 <tr>
   <td class="col-1"><%= image_tag user.get_profile_image(50,50) %></td>
    <td class="col-2"><%= user.user_name %></td>
    <td class="col-1">投稿数:<%= user.posts.count %></td>
    <td class="col-2">フォロー数: <%= user.followings.count %></td>
    <td class="col-2">フォロワー数: <%= user.followers.count %></td>
    <td class="col-2">
   <% if current_user != user%>
   <% if current_user.following?(user) %>
      <%= link_to "フォロー外す", user_relationships_path(user.id), method: :delete, class: "btn btn-danger" %>
    <% else %>
      <%= link_to "フォローする", user_relationships_path(user.id), method: :post, class: "btn btn-primary" %>
    <% end %>
    <% end %>
  </td>
<td class="col-2">
  <%= link_to "ユーザー詳細", user_path(user), class: "btn btn-secondary" %>
  </td>
  </tr>
<% end %>
</table>

<% else %>
  <p>フォローしているユーザーはいません</p>
<% end %>
</div>
